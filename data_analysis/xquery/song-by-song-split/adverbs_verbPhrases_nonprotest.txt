xquery version "3.0";
let $songs := collection('/db/course/protest')/*
let $nonprotest :=
    for $song in $songs
    where not($song//protest = "true")
    return $song
for $song in $nonprotest
let $title := $song//title
let $verbPhrases := $song//verbPhrase
let $verbPhrasesCount := count($verbPhrases)
let $withAdverb := 
    for $verbPhrase in $verbPhrases
    where $verbPhrase//adverb
    return $verbPhrase
let $withAdverbCount := count($withAdverb)
let $percent := round(($withAdverbCount div $verbPhrasesCount * 100) * 100) div 100
return $title || ": percent of verb phrases that contain an adverb: " || $percent || "%"